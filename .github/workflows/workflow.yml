name: hello world!
on: [workflow_dispatch]

jobs:
    hello_world:
        runs-on: ubuntu-latest
        steps:
            - name: repostory clonation
              uses: actions/checkout@v3
            - run: python3 main.py
            - run: ls -la

            - name: ssh key creation
              env:
                ssh_key: ${{ secrets.SSHKEY}}
              run: |
                echo "$ssh_key" > key.pem
                chmod 600 key.pem
            
            - run: ls -la
            - run: cat key.pem

            - name: ssh conection
              uses: appleboy/ssh-action@v1
              with:
                host: ${{ secrets.HOST}}
                username: ${{ secrets.USER }}
                key: ${{ secrets.SSHKEY }}
                port: 22
                script: whoami